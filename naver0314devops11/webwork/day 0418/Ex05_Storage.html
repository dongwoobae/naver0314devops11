<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!--부트스트랩-->
<!-- Latest compiled and minified CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<!--글꼴-->
<link href="https://fonts.googleapis.com/css2?family=Dokdo&family=Dongle&family=Gaegu&family=Gowun+Batang&family=Reem+Kufi+Fun:wght@400..700&family=Song+Myung&family=Tilt+Neon&display=swap" rel="stylesheet">
 <style>
        body *{
            font-family: "Gowun Batang";
        }
    </style>
    <script>
        let selcar,carname,carimg;

        function init(){
            //로컬 스토리지에 저장한 값을 읽어서 초기값 변경
            //몇개 안되니까 여기 하는데 많을때는 따로 함수로 만들어서 호출하는것이 좋다.
            let photo=localStorage.photo;
            let photoname=localStorage.photoname;
            let selIndex=localStorage.selIndex;

            carimg.setAttribute("src",photo);
            carname.innerText=photoname;
            selcar.selectedIndex=selIndex;
            
        }
        window.onload=function(){
            selcar = document.querySelector(".selcar");
            carname = document.querySelector(".carname");
            carimg=document.getElementsByTagName("img")[0];//반환타입 배열. s 붙은거는 다 배열타입 반환
            
            init();
            
            selcar.onchange=function(){
                let cvalue=this.value;
                let cname=this.options[this.selectedIndex].label;

                carimg.setAttribute("src",cvalue);
                carname.innerHTML=cname;//innerText로 해도 됨

                //로컬 스토리지에 저장할 내용
                //1.이미지 src
                localStorage.setItem("photo",cvalue);
                localStorage.setItem("photoname",cname);
                localStorage.setItem("selIndex",this.selectedIndex);
            }
        }
    </script>
</head>
<body>
    <h6 class="alert alert-success">선택한 값을 유지시켜보자</h6>
    <img src="../image/mycar/mycar13.png" width="250">

    <h5 class="carname">핑크 자동차</h5>
    <br><br>
    <select class="form-select selcar" style="width: 150px;">
        <script>
            let car=["mycar13","mycar11","mycar15","mycar7","mycar5"];
            let names=["핑크 자동차","노랑 자동차","노랑 봉고차","노랑 미니","초록 미니"];
            for(let idx in car){
                let s=`<option value="../image/mycar/${car[idx]}.png">
                    ${names[idx]}</option>`;
                    document.write(s);
            }
        </script>
    </select>
</body>
</html>