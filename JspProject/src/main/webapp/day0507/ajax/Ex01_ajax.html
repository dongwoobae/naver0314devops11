<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!--��Ʈ��Ʈ��-->
    <!-- Latest compiled and minified CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!--�۲�-->
    <link
      href="https://fonts.googleapis.com/css2?family=Dokdo&family=Dongle&family=Gaegu&family=Gowun+Batang&family=Reem+Kufi+Fun:wght@400..700&family=Song+Myung&family=Dancing+Script&family=Tilt+Neon&display=swap"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.0/font/bootstrap-icons.css"
    />
    <style>
      @font-face {
        font-family: "Pretendard-Regular";
        src: url("https://fastly.jsdelivr.net/gh/Project-Noonnu/noonfonts_2107@1.1/Pretendard-Regular.woff")
          format("woff");
        font-weight: 400;
        font-style: normal;
      }

      body * {
        font-family: "Pretendard-Regular";
      }
      figure.mycar {
        display: flex;
        flex-wrap: wrap;
        float: left;
        margin: 10px;
      }
      figure.mycar img {
        width: 130px;
      }
      figure.mycar figcaption {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <!--비 동기방식의 자바스크립트와 XML (Asynchronous JavaScript and XML)-->
    <div style="margin: 10px">
      <button type="button" class="btn btn-sm btn-success" id="btn1">
        xml 데이터 읽기(1개짜리)
      </button>
      <button type="button" class="btn btn-sm btn-success" id="btn2">
        json 데이터 읽기(1개짜리)
      </button>
      <br /><br />
      <button type="button" class="btn btn-sm btn-success" id="btn3">
        xml 데이터 읽기(여러개)
      </button>
      <button type="button" class="btn btn-sm btn-success" id="btn4">
        xml 데이터 읽기(여러개)
      </button>
      <hr />
      <div class="result"></div>
    </div>
    <script>
      $("#btn1").click(function () {
        $.ajax({
          type: "get",
          url: "../data/data1.xml",
          dataType: "xml",
          success: function (data) {
            let name = $(data).find("name").text();
            let number = $(data).find("name").attr("no");
            let color = $(data).find("name").attr("color");
            let addr = $(data).find("addr").text();
            let age = $(data).find("age").text();

            let s = `
            번호: ${number}
            이름: ${name}
            주소: ${addr}
            나이: ${age}
            `;
            $("div.result").html(s).css("background-color", color);
          },
          statusCode: {
            404: function () {
              alert("xml파일을 찾을 수 없어요");
            },
            500: function () {
              alert("서버오류: 코드 확인 요망");
            },
          },
        });
      });
      $("#btn2").click(function () {
        $.ajax({
          type: "get",
          url: "../data/data2.json",
          dataType: "json",
          success: function (data) {
            let s = `
                이름:${data.name}
                주소:${data.addr}
                핸드폰:${data.hp}
                `;
            $("div.result").html(s).css("background-color", "lightgray");
          },
        });
      });
      $("#btn3").click(function () {
        $.ajax({
          type: "get",
          url: "../data/data3.xml",
          dataType: "xml",
          success: function (data) {
            $("div.result").empty();
            $(data)
              .find("mycar")
              .each(function (idx, ele) {
                let title = $(ele).find("title").text();
                let photo = $(ele).find("photo").text();
                let s = `
                <figure class="mycar">
                    <img src="${photo}">
                    <figcaption>${title}</figcaption>
                    </figure>
                `;
                $("div.result").append(s);
              });
          },
        });
      });

      $("#btn4").click(function () {
        $("div.result").empty().css("background-color", "white");
        $.ajax({
          type: "get",
          url: "../data/data4.json",
          dataType: "json",
          success: function (data) {
            $.each(data, function (idx, ele) {
              let s = `
                    번호:${idx}번
                    <br>
                    <img src="${ele.photo}" width="130">
                    <br>
                    이름:${ele.name}<br>
                    나이:${ele.age}
                    <hr>
                    `;
              $("div.result").append(s);
            });
          },
        });
      });
    </script>
  </body>
</html>
